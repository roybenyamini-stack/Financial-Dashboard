<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×ª×™×§ ×”×©×§×¢×•×ª</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Heebo', sans-serif;
  background: #f0f2f5;
  color: #1a1a2e;
  min-height: 100vh;
  padding: 20px;
}

/* HEADER */
.header {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  border-radius: 20px;
  padding: 24px 32px;
  margin-bottom: 20px;
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 8px 32px rgba(15,52,96,0.3);
}
.header-title h1 { font-size: 20px; font-weight: 800; }
.header-title p { font-size: 12px; opacity: 0.5; margin-top: 3px; }
.header-stats { display: flex; gap: 36px; align-items: center; }
.stat-item { text-align: center; display: flex; flex-direction: column; align-items: center; }
.stat-value { margin-top: 8px; margin-bottom: 4px; }
.stat-label { font-size: 10px; opacity: 0.5; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 3px; }
.stat-value { font-size: 24px; font-weight: 800; letter-spacing: -1px; }
.stat-value.green { color: #4ade80; }
.stat-change { font-size: 11px; opacity: 0.6; margin-top: 2px; }
.divider { width: 1px; height: 44px; background: rgba(255,255,255,0.12); }

/* CARDS */
.cards-row {
  display: grid;
  grid-template-columns: auto repeat(9, 1fr);
  gap: 14px;
  margin-bottom: 20px;
}
.card-total {
  background: #1a1a2e;
  border-radius: 14px;
  padding: 16px 22px;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-width: 130px;
  border: 2px solid transparent;
}
.card-total.active, .card-total:hover { background: #0f3460; transform: translateY(-2px); }
.card-total .label { font-size: 10px; opacity: 0.6; text-transform: uppercase; letter-spacing: 0.8px; }
.card-total .value { font-size: 20px; font-weight: 800; margin-top: 4px; }
.card-total .change { font-size: 11px; color: #4ade80; margin-top: 3px; }

.card {
  background: white;
  border-radius: 14px;
  padding: 16px 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06);
  border-right: 4px solid var(--cat-color);
  cursor: pointer;
  transition: all 0.2s;
  border: 2px solid transparent;
  border-right: 4px solid var(--cat-color);
}
.card:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
.card.active { border: 2px solid var(--cat-color); border-right: 4px solid var(--cat-color); box-shadow: 0 0 0 3px var(--cat-color-alpha); }
.card .card-label { font-size: 11px; color: #999; font-weight: 500; margin-bottom: 5px; }
.card .card-value { font-size: 20px; font-weight: 800; color: #1a1a2e; }
.card .card-change { font-size: 11px; font-weight: 600; margin-top: 5px; }
.card .card-change.pos { color: #16a34a; }

/* CHART SECTION */
.chart-section {
  background: white;
  border-radius: 18px;
  padding: 24px 28px;
  margin-bottom: 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06);
  width: 100%;
  box-sizing: border-box;
}
.chart-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 6px;
}
.chart-title { font-size: 15px; font-weight: 700; }
.chart-subtitle { font-size: 11px; color: #aaa; margin-top: 2px; }

.active-label {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: #f5f5f5;
  border-radius: 20px;
  padding: 5px 14px;
  font-size: 12px;
  font-weight: 600;
  color: #333;
  transition: all 0.3s;
}
.active-label .dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--active-color, #1a1a2e);
}
.chart-container { height: 240px; margin-top: 16px; width: 100%; position: relative; }
@media (max-width: 900px) {
  .chart-container { height: 200px; }
  .chart-section { padding: 16px; }
  .chart-header { flex-direction: column; gap: 8px; }
}

/* CATEGORY SECTIONS */
.category-section {
  background: white;
  border-radius: 14px;
  margin-bottom: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  overflow: hidden;
}

.category-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 22px;
  cursor: pointer;
  border-right: 4px solid var(--cat-color);
  transition: background 0.15s;
  user-select: none;
}
.category-header:hover { background: #fafafa; }
.category-header.active { background: var(--cat-color-ultralight); }

.cat-header-right { display: flex; align-items: center; gap: 12px; }
.cat-icon { width: 34px; height: 34px; border-radius: 10px; background: var(--cat-color-light); display: flex; align-items: center; justify-content: center; font-size: 15px; }
.cat-name { font-size: 14px; font-weight: 700; }
.cat-count { font-size: 11px; color: #aaa; margin-top: 1px; }
.cat-header-left { display: flex; align-items: center; gap: 16px; }
.cat-total { font-size: 17px; font-weight: 800; }
.cat-pct { font-size: 12px; font-weight: 600; padding: 3px 10px; border-radius: 20px; }
.cat-pct.pos { background: #dcfce7; color: #16a34a; }
.chevron { font-size: 11px; color: #ccc; transition: transform 0.25s; }
.chevron.open { transform: rotate(180deg); }

/* BODY / TABLE */
.category-body { display: none; border-top: 1px solid #f5f5f5; overflow-x: auto; scroll-behavior: smooth; }
.category-body.open { display: block; }

table { width: 100%; border-collapse: collapse; font-size: 11.5px; direction: ltr; }
th {
  padding: 9px 12px;
  text-align: center;
  font-weight: 600;
  color: #888;
  background: #fafafa;
  border-bottom: 1px solid #f0f0f0;
  white-space: nowrap;
}
th:first-child { text-align: right; min-width: 200px; direction: rtl; }
td { padding: 9px 12px; text-align: center; border-bottom: 1px solid #f9f9f9; vertical-align: top; }
td:first-child { text-align: right; font-weight: 600; color: #333; white-space: nowrap; direction: rtl; }
tr:hover td { background: #f8faff; cursor: pointer; }
tr.fund-active td { background: #fffbf0 !important; }
tr:last-child td { border-bottom: none; }

.val { font-weight: 600; color: #1a1a2e; }
.val small { display: block; font-size: 10px; }
.dpos { color: #16a34a; }
.dneg { color: #dc2626; }
.dzer { color: #ccc; }
.dash { color: #ddd; }

.total-row td { font-weight: 700 !important; background: #f8f9ff !important; border-top: 2px solid #e8eaf6; }
.note { display: inline-block; font-size: 9px; padding: 1px 5px; border-radius: 6px; background: #fff3cd; color: #856404; margin-right: 3px; vertical-align: middle; }
.delta-row { display: none; background: #f8faff; }
.delta-row.visible { display: table-row; }
.delta-row td { font-size: 11px; padding: 3px 12px; border-bottom: 1px solid #f0f0f0; color: #888; }
.delta-row td:first-child { color: #aaa; font-style: italic; font-size: 10px; }
.dval { font-weight: 600; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div class="header-title">
    <h1>ğŸ“Š ×ª×™×§ ×”×©×§×¢×•×ª</h1>
    <p id="hdr-subtitle" style="color:white; font-weight:700; font-size:13px;">××¦×™×’: ×¤×‘×¨×³ 26</p>
  </div>
  <div class="header-stats">
    <div class="stat-item">
      <div class="stat-label">×¡×”×´×› × ×›×¡×™×</div>
      <div class="stat-value" id="hdr-total">14,964</div>
      <div class="stat-change">××œ×¤×™ ×©×´×—</div>
    </div>
    <div class="divider"></div>
    <div class="stat-item" style="padding-top: 18px;">
      <div class="stat-label">×©×™× ×•×™ ×›×•×œ×œ</div>
      <div class="stat-value green" id="hdr-change-val">4,036</div>
      <div class="stat-change" style="display:flex; flex-direction:column; gap:2px; font-size:11px; color:white;">
        <span style="color:white;">ğŸ“ˆ ×ª×©×•××”: <span id="hdr-returns-val" style="color:#4ade80; font-weight:600;">+2,354</span></span>
        <span style="color:white;">ğŸ’° ×”×¤×§×“×•×ª: <span id="hdr-deposits-val" style="color:white; font-weight:600;">1,682</span></span>
      </div>
    </div>
    <div class="divider"></div>
    <div class="stat-item">
      <div class="stat-label">×ª×©×•××” ×× ×•×˜×¨×œ×ª</div>
      <div class="stat-value green" id="hdr-ret-val">25.4%</div>
      <div class="stat-change" id="hdr-ret-range">×™× ×•×³ 2025 â€“ ×¤×‘×¨×³ 26</div>
    </div>
  </div>
</div>

<!-- CARDS -->
<div class="cards-row">
  <div class="card-total active" id="card-all" onclick="selectView('all')">
    <div class="label">×¡×”×´×›</div>
    <div class="value" id="card-val-all">14,964</div>
    <div class="change" id="card-chg-all">+14.7% × ××“×“</div>
  </div>
  <div class="card" style="--cat-color:#0891b2;--cat-color-alpha:#0891b220" id="card-mezuman" onclick="selectView('mezuman')">
    <div class="card-label">××–×•××Ÿ</div>
    <div class="card-value" id="card-val-mezuman">1,105</div>
    <div class="card-change" id="card-chg-mezuman"></div>
  </div>
  <div class="card" style="--cat-color:#dc2626;--cat-color-alpha:#dc262620" id="card-hishtalmut" onclick="selectView('hishtalmut')">
    <div class="card-label">×§×¨× ×•×ª ×”×©×ª×œ××•×ª</div>
    <div class="card-value" id="card-val-hishtalmut">4,606</div>
    <div class="card-change pos" id="card-chg-hishtalmut">â–² +16.9%</div>
  </div>
  <div class="card" style="--cat-color:#b45309;--cat-color-alpha:#b4530920" id="card-gemel" onclick="selectView('gemel')">
    <div class="card-label">×§×•×¤×•×ª ×’××œ</div>
    <div class="card-value" id="card-val-gemel">1,730</div>
    <div class="card-change pos" id="card-chg-gemel">â–² +17.6%</div>
  </div>
  <div class="card" style="--cat-color:#9f1239;--cat-color-alpha:#9f123920" id="card-gemel_invest" onclick="selectView('gemel_invest')">
    <div class="card-label">×’××œ ×œ×”×©×§×¢×”</div>
    <div class="card-value" id="card-val-gemel_invest">902</div>
    <div class="card-change pos" id="card-chg-gemel_invest">â–² +21.8%</div>
  </div>
  <div class="card" style="--cat-color:#a16207;--cat-color-alpha:#a1620720" id="card-harel" onclick="selectView('harel')">
    <div class="card-label">×”×¨××œ</div>
    <div class="card-value" id="card-val-harel">7,126</div>
    <div class="card-change pos" id="card-chg-harel">â–² +15.9%</div>
  </div>
  <div class="card" style="--cat-color:#7c3aed;--cat-color-alpha:#7c3aed20" id="card-meitav" onclick="selectView('meitav')">
    <div class="card-label">××™×˜×‘</div>
    <div class="card-value" id="card-val-meitav">639</div>
    <div class="card-change pos" id="card-chg-meitav">â–² +13.2%</div>
  </div>
</div>

<!-- CHART -->
<div class="chart-section">
  <div class="chart-header">
    <div>
      <div class="chart-title">×”×¦×˜×‘×¨×•×ª × ×›×¡×™×</div>
      <div class="chart-subtitle">×™× ×•××¨ 2025 â€“ ×¤×‘×¨×•××¨ 2026 Â· ×‘××œ×¤×™  Â· ×œ×—×¥ ×¢×œ ×§×˜×’×•×¨×™×” ××• ×§×¨×Ÿ ×œ×¡×™× ×•×Ÿ</div>
    </div>
    <div class="active-label" id="activeLabel" style="--active-color:#1a1a2e">
      <span class="dot"></span>
      <span id="activeLabelText">×¡×”×´×› ×›×œ ×”×§×˜×’×•×¨×™×•×ª</span>
    </div>
  </div>
  <div style="display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:10px;">
    <button id="btnNext" onclick="slideWindow(1)" title="×ª×§×•×¤×” ×”×‘××”" style="background:#f0f2f5;border:none;border-radius:8px;width:32px;height:32px;font-size:15px;cursor:pointer;color:#555;display:flex;align-items:center;justify-content:center;">&#8594;</button>
    <span id="winRange" style="font-size:13px;color:#555;font-family:Heebo;font-weight:700;min-width:160px;text-align:center;"></span>
    <button id="btnPrev" onclick="slideWindow(-1)" title="×ª×§×•×¤×” ×§×•×“××ª" style="background:#f0f2f5;border:none;border-radius:8px;width:32px;height:32px;font-size:15px;cursor:pointer;color:#555;display:flex;align-items:center;justify-content:center;">&#8592;</button>
  </div>
  <div class="chart-container">
    <canvas id="mainChart"></canvas>
  </div>
</div>

<!-- CATEGORY: ××–×•××Ÿ -->
<div class="category-section" id="sec-mezuman" style="--cat-color:#0891b2;--cat-color-light:#e0f2fe;--cat-color-ultralight:#f0fbff">
  <div class="category-header" id="hdr-mezuman" onclick="toggleCat('mezuman'); selectView('mezuman')">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ’µ</div>
      <div>
        <div class="cat-name">××–×•××Ÿ</div>
        <div class="cat-count">3 ×¨×›×™×‘×™×</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-mezuman">1,105</div>
      <div class="cat-pct" id="sec-pct-mezuman"></div>
      <div class="chevron" id="chev-mezuman">â–¼</div>
    </div>
  </div>
  <div class="category-body" id="body-mezuman">
    <table>
      <thead><tr>
        <th>×¨×›×™×‘</th>
        <th data-col="0">×™× ×•×³ 25</th><th data-col="1">×¤×‘×¨×³ 25</th><th data-col="2">××¨×¥ 25</th><th data-col="3">××¤×¨×³ 25</th><th data-col="4">×××™ 25</th><th data-col="5">×™×•× ×™ 25</th><th data-col="6">×™×•×œ×™ 25</th><th data-col="7">××•×’×³ 25</th><th data-col="8">×¡×¤×˜×³ 25</th><th data-col="9">××•×§×³ 25</th><th data-col="10">× ×•×‘×³ 25</th><th data-col="11">×“×¦××³ 25</th><th data-col="12">×™× ×•×³ 26</th><th data-col="13">×¤×‘×¨×³ 26</th>
      </tr></thead>
      <tbody>
        <tr onclick="selectFund('××–×•××Ÿ×©×§×œ×™','#0891b2')" data-fund="××–×•××Ÿ×©×§×œ×™">
          <td>××–×•××Ÿ ×©×§×œ×™</td>
          <td data-col="0" class="val">40</td><td data-col="1" class="val">40</td><td data-col="2" class="val">40</td><td data-col="3" class="val">40</td><td data-col="4" class="val">40</td><td data-col="5" class="val">40</td><td data-col="6" class="val">40</td><td data-col="7" class="val">40</td><td data-col="8" class="val">30</td><td data-col="9" class="val">20</td><td data-col="10" class="val">20</td><td data-col="11" class="val">20</td><td data-col="12" class="val">915</td><td data-col="13" class="val">100</td>
        </tr>
        <tr onclick="selectFund('××–×•××Ÿ×“×•×œ×¨×™','#0891b2')" data-fund="××–×•××Ÿ×“×•×œ×¨×™">
          <td>××–×•××Ÿ ×“×•×œ×¨×™ $</td>
          <td data-col="0" class="val">119</td><td data-col="1" class="val">106</td><td data-col="2" class="val">39</td><td data-col="3" class="val">22</td><td data-col="4" class="val">47</td><td data-col="5" class="val">50</td><td data-col="6" class="val">50</td><td data-col="7" class="val">53</td><td data-col="8" class="val">60</td><td data-col="9" class="val">161</td><td data-col="10" class="val">99</td><td data-col="11" class="val">102</td><td data-col="12" class="val">107</td><td data-col="13" class="val">104</td>
        </tr>
        <tr onclick="selectFund('××™×˜×‘×©×§×œ×™×ª','#0891b2')" data-fund="××™×˜×‘×©×§×œ×™×ª">
          <td>××™×˜×‘ ×§×¨×Ÿ ×›×¡×¤×™×ª</td>
          <td data-col="0" class="dash">â€”</td><td data-col="1" class="dash">â€”</td><td data-col="2" class="dash">â€”</td><td data-col="3" class="dash">â€”</td><td data-col="4" class="dash">â€”</td><td data-col="5" class="dash">â€”</td><td data-col="6" class="dash">â€”</td><td data-col="7" class="dash">â€”</td><td data-col="8" class="dash">â€”</td><td data-col="9" class="dash">â€”</td><td data-col="10" class="dash">â€”</td><td data-col="11" class="dash">â€”</td><td data-col="12" class="dash">â€”</td><td data-col="13" class="val">901</td>
        </tr>
        <tr class="total-row" onclick="selectView('mezuman')">
          <td>×¡×”×´×› ×§×˜×’×•×¨×™×”</td><td data-col="0" class="val">159</td><td data-col="1" class="val">146</td><td data-col="2" class="val">79</td><td data-col="3" class="val">62</td><td data-col="4" class="val">87</td><td data-col="5" class="val">90</td><td data-col="6" class="val">90</td><td data-col="7" class="val">93</td><td data-col="8" class="val">90</td><td data-col="9" class="val">181</td><td data-col="10" class="val">119</td><td data-col="11" class="val">122</td><td data-col="12" class="val">1,022</td><td data-col="13" class="val">1,105</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- CATEGORY: ×§×¨× ×•×ª ×”×©×ª×œ××•×ª -->
<div class="category-section" id="sec-hishtalmut" style="--cat-color:#dc2626;--cat-color-light:#fee2e2;--cat-color-ultralight:#fff5f5">
  <div class="category-header" id="hdr-hishtalmut" onclick="toggleCat('hishtalmut'); selectView('hishtalmut')">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ“ˆ</div>
      <div>
        <div class="cat-name">×§×¨× ×•×ª ×”×©×ª×œ××•×ª</div>
        <div class="cat-count">4 ×§×¨× ×•×ª Â· ×›×•×œ×œ ×§×¨×Ÿ ×¤×¢×™×œ×”</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-hishtalmut">4,606</div>
      <div class="cat-pct pos" id="sec-pct-hishtalmut">+16.9%</div>
      <div class="chevron" id="chev-hishtalmut">â–¼</div>
    </div>
  </div>
  <div class="category-body" id="body-hishtalmut">
    <table>
      <thead><tr>
        <th>×§×¨×Ÿ</th>
        <th data-col="0">×™× ×•×³ 25</th><th data-col="1">×¤×‘×¨×³ 25</th><th data-col="2">××¨×¥ 25</th><th data-col="3">××¤×¨×³ 25</th><th data-col="4">×××™ 25</th><th data-col="5">×™×•× ×™ 25</th><th data-col="6">×™×•×œ×™ 25</th><th data-col="7">××•×’×³ 25</th><th data-col="8">×¡×¤×˜×³ 25</th><th data-col="9">××•×§×³ 25</th><th data-col="10">× ×•×‘×³ 25</th><th data-col="11">×“×¦××³ 25</th><th data-col="12">×™× ×•×³ 26</th><th data-col="13">×¤×‘×¨×³ 26</th>
      </tr></thead>
      <tbody>
        <tr onclick="selectFund('××©×§×”×©39905556','#dc2626')" data-fund="××©×§×”×©39905556">
          <td>××´×© ×§×´×”×© 39905556</td>
          <td data-col="0" class="val">2,406</td><td data-col="1" class="val">2,437</td><td data-col="2" class="val">2,416</td><td data-col="3" class="val">2,386</td><td data-col="4" class="val">2,401</td><td data-col="5" class="val">2,469</td><td data-col="6" class="val">2,548</td><td data-col="7" class="val">2,567</td><td data-col="8" class="val">2,595</td><td data-col="9" class="val">2,654</td><td data-col="10" class="val">2,685</td><td data-col="11" class="val">2,700</td><td data-col="12" class="val">2,700</td><td data-col="13" class="val">2,743</td>
        </tr>
        <tr onclick="selectFund('××©×§×”×©6730513','#dc2626')" data-fund="××©×§×”×©6730513">
          <td>××´×© ×§×´×”×© 6730513 â† ××™×˜×‘ 917-442504</td>
          <td data-col="0" class="val">772</td><td data-col="1" class="val">792</td><td data-col="2" class="val">770</td><td data-col="3" class="val">747</td><td data-col="4" class="val">754</td><td data-col="5" class="val">802</td><td data-col="6" class="val">846</td><td data-col="7" class="val">860</td><td data-col="8" class="val">869</td><td data-col="9" class="val">905</td><td data-col="10" class="val">919</td><td data-col="11" class="val">921</td><td data-col="12" class="val">941</td><td data-col="13" class="val">981</td>
        </tr>
        <tr onclick="selectFund('××©×§×”×©40035706','#dc2626')" data-fund="××©×§×”×©40035706">
          <td>××´×© ×§×”×´×© 40035706</td>
          <td data-col="0" class="val">281</td><td data-col="1" class="val">285</td><td data-col="2" class="val">283</td><td data-col="3" class="val">279</td><td data-col="4" class="val">281</td><td data-col="5" class="val">289</td><td data-col="6" class="val">298</td><td data-col="7" class="val">300</td><td data-col="8" class="val">304</td><td data-col="9" class="val">310</td><td data-col="10" class="val">314</td><td data-col="11" class="val">316</td><td data-col="12" class="val">316</td><td data-col="13" class="val">321</td>
        </tr>
        <tr onclick="selectFund('××•×¨×§×”×©499293','#dc2626')" data-fund="××•×¨×§×”×©499293">
          <td>××•×¨ ×§×”×´×© 499293 â† ××™×˜×‘ 917-443195 <span class="note">×¤×¢×™×œ×”</span></td>
          <td data-col="0" class="val">320</td><td data-col="1" class="val">339</td><td data-col="2" class="val">348</td><td data-col="3" class="val">350</td><td data-col="4" class="val">362</td><td data-col="5" class="val">391</td><td data-col="6" class="val">418</td><td data-col="7" class="val">435</td><td data-col="8" class="val">448</td><td data-col="9" class="val">473</td><td data-col="10" class="val">493</td><td data-col="11" class="val">508</td><td data-col="12" class="val">529</td><td data-col="13" class="val">561</td>
        </tr>
        <tr class="total-row" onclick="selectView('hishtalmut')">
          <td>×¡×”×´×› ×§×˜×’×•×¨×™×”</td>
          <td data-col="0">3,779</td><td data-col="1">3,853</td><td data-col="2">3,817</td><td data-col="3">3,762</td><td data-col="4">3,798</td><td data-col="5">3,951</td><td data-col="6">4,110</td><td data-col="7">4,162</td><td data-col="8">4,216</td><td data-col="9">4,342</td><td data-col="10">4,411</td><td data-col="11">4,445</td><td data-col="12">4,486</td><td data-col="13">4,606</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- CATEGORY: ×§×•×¤×•×ª ×’××œ -->
<div class="category-section" id="sec-gemel" style="--cat-color:#b45309;--cat-color-light:#fef3c7;--cat-color-ultralight:#fffdf5">
  <div class="category-header" id="hdr-gemel" onclick="toggleCat('gemel'); selectView('gemel')">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ¦</div>
      <div>
        <div class="cat-name">×§×•×¤×•×ª ×’××œ</div>
        <div class="cat-count">5 ×§×•×¤×•×ª Â· ×”×¤× ×™×§×¡ ×××§×•×¨ ×—×™×¦×•× ×™</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-gemel">1,730</div>
      <div class="cat-pct pos" id="sec-pct-gemel">+17.6%</div>
      <div class="chevron" id="chev-gemel">â–¼</div>
    </div>
  </div>
  <div class="category-body" id="body-gemel">
    <table>
      <thead><tr>
        <th>×§×¨×Ÿ</th>
        <th data-col="0">×™× ×•×³ 25</th><th data-col="1">×¤×‘×¨×³ 25</th><th data-col="2">××¨×¥ 25</th><th data-col="3">××¤×¨×³ 25</th><th data-col="4">×××™ 25</th><th data-col="5">×™×•× ×™ 25</th><th data-col="6">×™×•×œ×™ 25</th><th data-col="7">××•×’×³ 25</th><th data-col="8">×¡×¤×˜×³ 25</th><th data-col="9">××•×§×³ 25</th><th data-col="10">× ×•×‘×³ 25</th><th data-col="11">×“×¦××³ 25</th><th data-col="12">×™× ×•×³ 26</th><th data-col="13">×¤×‘×¨×³ 26</th>
      </tr></thead>
      <tbody>
        <tr onclick="selectFund('6730511××©×’××œ','#b45309')" data-fund="6730511××©×’××œ">
          <td>××´×© ×’××œ 6730511 â† ××•×¨ 1428298</td>
          <td data-col="0" class="val">402</td><td data-col="1" class="val">413</td><td data-col="2" class="val">402</td><td data-col="3" class="val">391</td><td data-col="4" class="val">395</td><td data-col="5" class="val">421</td><td data-col="6" class="val">444</td><td data-col="7" class="val">452</td><td data-col="8" class="val">457</td><td data-col="9" class="val">476</td><td data-col="10" class="val">484</td><td data-col="11" class="val">490</td><td data-col="12" class="val">495</td><td data-col="13" class="val">517</td>
        </tr>
        <tr onclick="selectFund('××©×’××œ39774495','#b45309')" data-fund="××©×’××œ39774495">
          <td>××´×© ×’××œ 39774495 â† ××•×¨ 1375688</td>
          <td data-col="0" class="val">262</td><td data-col="1" class="val">266</td><td data-col="2" class="val">263</td><td data-col="3" class="val">260</td><td data-col="4" class="val">262</td><td data-col="5" class="val">269</td><td data-col="6" class="val">277</td><td data-col="7" class="val">277</td><td data-col="8" class="val">283</td><td data-col="9" class="val">289</td><td data-col="10" class="val">292</td><td data-col="11" class="val">293</td><td data-col="12" class="val">294</td><td data-col="13" class="val">300</td>
        </tr>
        <tr onclick="selectFund('6730512××©×’××œ','#b45309')" data-fund="6730512××©×’××œ">
          <td>××´×© ×’××œ 6730512 â† ××•×¨ 1375888</td>
          <td data-col="0" class="val">218</td><td data-col="1" class="val">220</td><td data-col="2" class="val">220</td><td data-col="3" class="val">220</td><td data-col="4" class="val">222</td><td data-col="5" class="val">224</td><td data-col="6" class="val">230</td><td data-col="7" class="val">231</td><td data-col="8" class="val">233</td><td data-col="9" class="val">237</td><td data-col="10" class="val">240</td><td data-col="11" class="val">242</td><td data-col="12" class="val">242</td><td data-col="13" class="val">245</td>
        </tr>
        <tr onclick="selectFund('6899425××©×’××œ','#b45309')" data-fund="6899425××©×’××œ">
          <td>××´×© ×’××œ 6899425 â† ××•×¨ 1375911</td>
          <td data-col="0" class="val">176</td><td data-col="1" class="val">180</td><td data-col="2" class="val">176</td><td data-col="3" class="val">170</td><td data-col="4" class="val">172</td><td data-col="5" class="val">183</td><td data-col="6" class="val">193</td><td data-col="7" class="val">196</td><td data-col="8" class="val">198</td><td data-col="9" class="val">206</td><td data-col="10" class="val">209</td><td data-col="11" class="val">209</td><td data-col="12" class="val">213</td><td data-col="13" class="val">223</td>
        </tr>
        <tr onclick="selectFund('×”×¤× ×™×§×¡×’××œ926-084678','#be185d')" data-fund="×”×¤× ×™×§×¡×’××œ926-084678" style="background:#fff0f6;">
          <td>×”×¤× ×™×§×¡ ×’××œ 926-084678 <span class="note">×—×™×¦×•× ×™</span></td>
          <td data-col="0" class="dash">â€”</td><td data-col="1" class="dash">â€”</td><td data-col="2" class="dash">â€”</td><td data-col="3" class="dash">â€”</td><td data-col="4" class="dash">â€”</td><td data-col="5" class="dash">â€”</td><td data-col="6" class="dash">â€”</td><td data-col="7" class="dash">â€”</td><td data-col="8" class="dash">â€”</td><td data-col="9" class="dash">â€”</td><td data-col="10" class="val">414</td><td data-col="11" class="val">414</td><td data-col="12" class="val">437</td><td data-col="13" class="val">445</td>
        </tr>
        <tr class="total-row" onclick="selectView('gemel')">
          <td>×¡×”×´×› ×§×˜×’×•×¨×™×”</td>
          <td data-col="0">1,058</td><td data-col="1">1,079</td><td data-col="2">1,061</td><td data-col="3">1,041</td><td data-col="4">1,051</td><td data-col="5">1,097</td><td data-col="6">1,144</td><td data-col="7">1,156</td><td data-col="8">1,171</td><td data-col="9">1,208</td><td data-col="10">1,639</td><td data-col="11">1,649</td><td data-col="12">1,684</td><td data-col="13">1,730</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- CATEGORY: ×’××œ ×œ×”×©×§×¢×” -->
<div class="category-section" id="sec-gemel_invest" style="--cat-color:#9f1239;--cat-color-light:#ffe4e6;--cat-color-ultralight:#fff5f6">
  <div class="category-header" id="hdr-gemel_invest" onclick="toggleCat('gemel_invest'); selectView('gemel_invest')">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ’¼</div>
      <div>
        <div class="cat-name">×’××œ ×œ×”×©×§×¢×”</div>
        <div class="cat-count">2 ×§×•×¤×•×ª Â· ×›×•×œ×œ ×”×¤×§×“×” 81k</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-gemel_invest">902</div>
      <div class="cat-pct pos" id="sec-pct-gemel_invest">+21.8%</div>
      <div class="chevron" id="chev-gemel_invest">â–¼</div>
    </div>
  </div>
  <div class="category-body" id="body-gemel_invest">
    <table>
      <thead><tr>
        <th>×§×¨×Ÿ</th>
        <th data-col="0">×™× ×•×³ 25</th><th data-col="1">×¤×‘×¨×³ 25</th><th data-col="2">××¨×¥ 25</th><th data-col="3">××¤×¨×³ 25</th><th data-col="4">×××™ 25</th><th data-col="5">×™×•× ×™ 25</th><th data-col="6">×™×•×œ×™ 25</th><th data-col="7">××•×’×³ 25</th><th data-col="8">×¡×¤×˜×³ 25</th><th data-col="9">××•×§×³ 25</th><th data-col="10">× ×•×‘×³ 25</th><th data-col="11">×“×¦××³ 25</th><th data-col="12">×™× ×•×³ 26</th><th data-col="13">×¤×‘×¨×³ 26</th>
      </tr></thead>
      <tbody>
        <tr onclick="selectFund('××©×’××œ×œ×”×©×§×¢×”2016-1738','#9f1239')" data-fund="××©×’××œ×œ×”×©×§×¢×”2016-1738">
          <td>××´×© ×’××œ ×œ×”×©×§×¢×” â† ××™×˜×‘ 917-443197</td>
          <td data-col="0" class="val">286</td><td data-col="1" class="val">371</td><td data-col="2" class="val">368</td><td data-col="3" class="val">364</td><td data-col="4" class="val">366</td><td data-col="5" class="val">376</td><td data-col="6" class="val">389</td><td data-col="7" class="val">391</td><td data-col="8" class="val">396</td><td data-col="9" class="val">405</td><td data-col="10" class="val">410</td><td data-col="11" class="val">411</td><td data-col="12" class="val">415</td><td data-col="13" class="val">424</td>
        </tr>
        <tr onclick="selectFund('××•×¨×’××œ×œ×”×©×§×¢×”','#9f1239')" data-fund="××•×¨×’××œ×œ×”×©×§×¢×”">
          <td>××•×¨ ×’××œ ×œ×”×©×§×¢×” â† ××™×˜×‘ 912-443197</td>
          <td data-col="0" class="val">364</td><td data-col="1" class="val">376</td><td data-col="2" class="val">377</td><td data-col="3" class="val">370</td><td data-col="4" class="val">373</td><td data-col="5" class="val">393</td><td data-col="6" class="val">411</td><td data-col="7" class="val">419</td><td data-col="8" class="val">422</td><td data-col="9" class="val">436</td><td data-col="10" class="val">446</td><td data-col="11" class="val">449</td><td data-col="12" class="val">458</td><td data-col="13" class="val">478</td>
        </tr>
        <tr class="total-row" onclick="selectView('gemel_invest')">
          <td>×¡×”×´×› ×§×˜×’×•×¨×™×”</td>
          <td data-col="0">650</td><td data-col="1">747</td><td data-col="2">745</td><td data-col="3">734</td><td data-col="4">739</td><td data-col="5">769</td><td data-col="6">800</td><td data-col="7">810</td><td data-col="8">818</td><td data-col="9">841</td><td data-col="10">856</td><td data-col="11">860</td><td data-col="12">873</td><td data-col="13">902</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- CATEGORY: ×”×¨××œ + ××™×˜×‘ -->
<div class="category-section" id="sec-harel" style="margin-bottom: 20px;" style="--cat-color:#a16207;--cat-color-light:#fef9c3;--cat-color-ultralight:#fffef5">
  <div class="category-header" id="hdr-harel" onclick="toggleCat('harel'); selectView('harel')">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ›</div>
      <div>
        <div class="cat-name">×”×¨××œ</div>
        <div class="cat-count">3 ×§×¨× ×•×ª Â· ×”×¨××œ ×›×œ×œ×™ ×××§×•×¨ ×—×™×¦×•× ×™</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-harel">7,726</div>
      <div class="cat-pct pos" id="sec-pct-harel">+11.4%</div>
      <div class="chevron" id="chev-harel">â–¼</div>
    </div>
  </div>
  <div class="category-body" id="body-harel">
    <table>
      <thead><tr>
        <th>×§×¨×Ÿ</th>
        <th data-col="0">×™× ×•×³ 25</th><th data-col="1">×¤×‘×¨×³ 25</th><th data-col="2">××¨×¥ 25</th><th data-col="3">××¤×¨×³ 25</th><th data-col="4">×××™ 25</th><th data-col="5">×™×•× ×™ 25</th><th data-col="6">×™×•×œ×™ 25</th><th data-col="7">××•×’×³ 25</th><th data-col="8">×¡×¤×˜×³ 25</th><th data-col="9">××•×§×³ 25</th><th data-col="10">× ×•×‘×³ 25</th><th data-col="11">×“×¦××³ 25</th><th data-col="12">×™× ×•×³ 26</th><th data-col="13">×¤×‘×¨×³ 26</th>
      </tr></thead>
      <tbody>
        <tr onclick="selectFund('×”×¨××œ××’×•×•×Ÿ-×¤×•×œ×™×¡×ª×—×™×¡×›','#a16207')" data-fund="×”×¨××œ××’×•×•×Ÿ-×¤×•×œ×™×¡×ª×—×™×¡×›">
          <td>×”×¨××œ ××’×•×•×Ÿ - ×¤×•×œ×™×¡×ª ×—×™×¡×›×•×Ÿ</td>
          <td data-col="0" class="val">4,469</td><td data-col="1" class="val">4,473</td><td data-col="2" class="val">4,440</td><td data-col="3" class="val">4,444</td><td data-col="4" class="val">4,536</td><td data-col="5" class="val">4,630</td><td data-col="6" class="val">4,704</td><td data-col="7" class="val">4,758</td><td data-col="8" class="val">4,810</td><td data-col="9" class="val">4,927</td><td data-col="10" class="val">4,949</td><td data-col="11" class="val">5,019</td><td data-col="12" class="val">5,119</td><td data-col="13" class="val">5,174</td>
        </tr>
        <tr onclick="selectFund('×”×¨××œ×× ×™×•×ª106863031','#a16207')" data-fund="×”×¨××œ×× ×™×•×ª106863031">
          <td>×”×¨××œ ×× ×™×•×ª 106863031</td>
          <td data-col="0" class="val">1,680</td><td data-col="1" class="val">1,631</td><td data-col="2" class="val">1,572</td><td data-col="3" class="val">1,515</td><td data-col="4" class="val">1,620</td><td data-col="5" class="val">1,655</td><td data-col="6" class="val">1,703</td><td data-col="7" class="val">1,732</td><td data-col="8" class="val">1,799</td><td data-col="9" class="val">1,828</td><td data-col="10" class="val">1,775</td><td data-col="11" class="val">1,768</td><td data-col="12" class="val">1,766</td><td data-col="13" class="val">1,664</td>
        </tr>
        <tr onclick="selectFund('×”×¨××œ×›×œ×œ×™109062745','#a16207')" data-fund="×”×¨××œ×›×œ×œ×™109062745">
          <td>×”×¨××œ ×›×œ×œ×™ 109062745 <span class="note">×—×™×¦×•× ×™</span></td>
          <td data-col="0" class="dash">â€”</td><td data-col="1" class="dash">â€”</td><td data-col="2" class="dash">â€”</td><td data-col="3" class="dash">â€”</td><td data-col="4" class="val">252</td><td data-col="5" class="val">258</td><td data-col="6" class="val">262</td><td data-col="7" class="val">265</td><td data-col="8" class="val">268</td><td data-col="9" class="val">274</td><td data-col="10" class="val">275</td><td data-col="11" class="val">279</td><td data-col="12" class="val">285</td><td data-col="13" class="val">288</td>
        </tr>

        <tr class="total-row" onclick="selectView('harel')">
          <td>×¡×”×´×› ×§×˜×’×•×¨×™×”</td>
          <td data-col="0">6,149</td><td data-col="1">6,104</td><td data-col="2">6,012</td><td data-col="3">5,959</td><td data-col="4">6,408</td><td data-col="5">6,543</td><td data-col="6">6,669</td><td data-col="7">6,755</td><td data-col="8">6,877</td><td data-col="9">7,029</td><td data-col="10">6,999</td><td data-col="11">7,066</td><td data-col="12">7,199</td><td data-col="13">7,126</td>
        </tr>
      </tbody>
    </table>
  </div>

<!-- CATEGORY: ××™×˜×‘ ×§×¨× ×•×ª -->
<div style="margin-top: 8px;"></div>
<div class="category-section" id="sec-meitav" style="margin-top: 20px; --cat-color:#7c3aed;--cat-color-light:#ede9fe;--cat-color-ultralight:#f8f7ff">
  <div class="category-header" id="hdr-meitav" onclick="toggleCat('meitav'); selectView('meitav')">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ“Š</div>
      <div>
        <div class="cat-name">××™×˜×‘</div>
        <div class="cat-count">2 ×§×¨× ×•×ª</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-meitav">600</div>
      <div class="cat-pct pos" id="sec-pct-meitav">+13.2%</div>
      <div class="chevron" id="chev-meitav">â–¼</div>
    </div>
  </div>
  <div class="category-body" id="body-meitav">
    <table>
      <thead><tr>
        <th>×§×¨×Ÿ</th>
        <th data-col="0">×™× ×•×³ 25</th><th data-col="1">×¤×‘×¨×³ 25</th><th data-col="2">××¨×¥ 25</th><th data-col="3">××¤×¨×³ 25</th><th data-col="4">×××™ 25</th><th data-col="5">×™×•× ×™ 25</th><th data-col="6">×™×•×œ×™ 25</th><th data-col="7">××•×’×³ 25</th><th data-col="8">×¡×¤×˜×³ 25</th><th data-col="9">××•×§×³ 25</th><th data-col="10">× ×•×‘×³ 25</th><th data-col="11">×“×¦××³ 25</th><th data-col="12">×™× ×•×³ 26</th><th data-col="13">×¤×‘×¨×³ 26</th>
      </tr></thead>
      <tbody>
        <tr onclick="selectFund('××™×˜×‘×“×©× ×™×”×•×œ×§×¨× ×•×ª1693','#7c3aed')" data-fund="××™×˜×‘×“×©× ×™×”×•×œ×§×¨× ×•×ª1693">
          <td>××™×˜×‘ ×“×© × ×™×”×•×œ ×§×¨× ×•×ª 169301968</td>
          <td data-col="0" class="val">530</td><td data-col="1" class="val">530</td><td data-col="2" class="val">527</td><td data-col="3" class="val">520</td><td data-col="4" class="val">540</td><td data-col="5" class="val">550</td><td data-col="6" class="val">560</td><td data-col="7" class="val">560</td><td data-col="8" class="val">560</td><td data-col="9" class="val">560</td><td data-col="10" class="val">580</td><td data-col="11" class="val">580</td><td data-col="12" class="val">580</td><td data-col="13" class="val">600</td>
        </tr>
        <tr onclick="selectFund('××™×˜×‘×“×©×˜×¨×™×™×“','#7c3aed')" data-fund="××™×˜×‘×“×©×˜×¨×™×™×“">
          <td>××™×˜×‘ ×“×© ×˜×¨×™×™×“</td><td data-col="0" class="val">39</td><td data-col="1" class="val">39</td><td data-col="2" class="val">39</td><td data-col="3" class="val">39</td><td data-col="4" class="val">39</td><td data-col="5" class="val">39</td><td data-col="6" class="val">39</td><td data-col="7" class="val">39</td><td data-col="8" class="val">39</td><td data-col="9" class="val">39</td><td data-col="10" class="val">39</td><td data-col="11" class="val">39</td><td data-col="12" class="val">39</td><td data-col="13" class="val">39</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

</div>
<!-- CATEGORY: ××¨×‘×™×˜×¨××–×³ ×•××œ×™×• -->
<div class="category-section" id="sec-arbitrage" style="--cat-color:#7c3aed;--cat-color-light:#ede9fe;--cat-color-ultralight:#f8f7ff">
  <div class="category-header" id="hdr-arbitrage" onclick="toggleCat('arbitrage'); selectView('arbitrage')">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ“Š</div>
      <div>
        <div class="cat-name">××¨×‘×™×˜×¨××–×³ ×•××œ×™×•</div>
        <div class="cat-count">×§×¨×Ÿ ××—×ª Â· × ××›×¨×” ×™× ×•×³ 26</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-arbitrage">0</div>
      <div class="cat-pct" id="sec-pct-arbitrage"></div>
      <div class="chevron" id="chev-arbitrage">â–¼</div>
    </div>
  </div>
  <div class="category-body" id="body-arbitrage">
    <table>
      <thead><tr>
        <th>×§×¨×Ÿ</th>
        <th data-col="0">×™× ×•×³ 25</th><th data-col="1">×¤×‘×¨×³ 25</th><th data-col="2">××¨×¥ 25</th><th data-col="3">××¤×¨×³ 25</th><th data-col="4">×××™ 25</th><th data-col="5">×™×•× ×™ 25</th><th data-col="6">×™×•×œ×™ 25</th><th data-col="7">××•×’×³ 25</th><th data-col="8">×¡×¤×˜×³ 25</th><th data-col="9">××•×§×³ 25</th><th data-col="10">× ×•×‘×³ 25</th><th data-col="11">×“×¦××³ 25</th><th data-col="12">×™× ×•×³ 26</th><th data-col="13">×¤×‘×¨×³ 26</th>
      </tr></thead>
      <tbody>
        <tr onclick="selectFund('××¨×‘×™×˜×¨××–×•××œ×™×•','#7c3aed')" data-fund="××¨×‘×™×˜×¨××–×•××œ×™×•">
          <td>××¨×‘×™×˜×¨××–×³ ×•××œ×™×•</td><td data-col="0" class="val">719</td><td data-col="1" class="val">822</td><td data-col="2" class="val">824</td><td data-col="3" class="val">772</td><td data-col="4" class="val">808</td><td data-col="5" class="val">846</td><td data-col="6" class="val">902</td><td data-col="7" class="val">900</td><td data-col="8" class="val">895</td><td data-col="9" class="val">895</td><td data-col="10" class="val">886</td><td data-col="11" class="val">901</td><td data-col="12">0</td><td data-col="13">0</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- CATEGORY: ×“×™×¨×” -->
<div class="category-section" id="sec-dira" style="--cat-color:#78716c;--cat-color-light:#f5f5f4;--cat-color-ultralight:#fafaf9">
  <div class="category-header" id="hdr-dira" onclick="selectView('dira')" style="cursor:pointer;">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ </div>
      <div>
        <div class="cat-name">×“×™×¨×”</div>
        <div class="cat-count">×¢×¨×š ×§×‘×•×¢ ×‘×¡×¤×¨×™×</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-dira">1,200</div>
      <div class="cat-pct" id="sec-pct-dira"></div>
    </div>
  </div>
</div>

<!-- CATEGORY: ×—×•×‘ -->
<div class="category-section" id="sec-chov" style="--cat-color:#64748b;--cat-color-light:#f1f5f9;--cat-color-ultralight:#f8fafc">
  <div class="category-header" id="hdr-chov" onclick="toggleCat('chov'); selectView('chov')">
    <div class="cat-header-right">
      <div class="cat-icon">ğŸ“‰</div>
      <div>
        <div class="cat-name">×—×•×‘</div>
        <div class="cat-count">2 ×¨×›×™×‘×™× Â· ×¦×¤×•×™ ×œ×”×ª××¤×¡</div>
      </div>
    </div>
    <div class="cat-header-left">
      <div class="cat-total" id="sec-val-chov" style="color:#ef4444;">1,768 </div>
      <div class="cat-pct" id="sec-pct-chov"></div>
      <div class="chevron" id="chev-chov">â–¼</div>
    </div>
  </div>
  <div class="category-body" id="body-chov">
    <table>
      <thead><tr>
        <th>×¨×›×™×‘</th>
        <th data-col="0">×™× ×•×³ 25</th><th data-col="1">×¤×‘×¨×³ 25</th><th data-col="2">××¨×¥ 25</th><th data-col="3">××¤×¨×³ 25</th><th data-col="4">×××™ 25</th><th data-col="5">×™×•× ×™ 25</th><th data-col="6">×™×•×œ×™ 25</th><th data-col="7">××•×’×³ 25</th><th data-col="8">×¡×¤×˜×³ 25</th><th data-col="9">××•×§×³ 25</th><th data-col="10">× ×•×‘×³ 25</th><th data-col="11">×“×¦××³ 25</th><th data-col="12">×™× ×•×³ 26</th><th data-col="13">×¤×‘×¨×³ 26</th>
      </tr></thead>
      <tbody>
        <tr onclick="selectFund('×—×•×‘×”×¨××œ','#64748b')" data-fund="×—×•×‘×”×¨××œ">
          <td>×—×•×‘ ×”×¨××œ</td><td data-col="0" class="val">195 </td><td data-col="1" class="val">179 </td><td data-col="2" class="val">165 </td><td data-col="3" class="val">150 </td><td data-col="4" class="val">135 </td><td data-col="5" class="val">120 </td><td data-col="6" class="val">105 </td><td data-col="7" class="val">90 </td><td data-col="8" class="val">75 </td><td data-col="9" class="val">60 </td><td data-col="10" class="val">45 </td><td data-col="11" class="val">30 </td><td data-col="12" class="val">15 </td><td data-col="13" class="dzer">0</td>
        </tr>
        <tr onclick="selectFund('×—×•×‘××œ×˜×©×•×œ×¨','#64748b')" data-fund="×—×•×‘××œ×˜×©×•×œ×¨">
          <td>×—×•×‘ ××œ×˜×©×•×œ×¨</td><td data-col="0" class="val">1,667 </td><td data-col="1" class="val">1,674 </td><td data-col="2" class="val">1,681 </td><td data-col="3" class="val">1,681 </td><td data-col="4" class="val">1,696 </td><td data-col="5" class="val">1,708 </td><td data-col="6" class="val">1,718 </td><td data-col="7" class="val">1,727 </td><td data-col="8" class="val">1,735 </td><td data-col="9" class="val">1,743 </td><td data-col="10" class="val">1,750 </td><td data-col="11" class="val">1,756 </td><td data-col="12" class="val">1,765 </td><td data-col="13" class="val">1,768 </td>
        </tr>
        <tr class="total-row" onclick="selectView('chov')">
          <td>×¡×”×´×› ×—×•×‘</td><td data-col="0" class="val">1,862 </td><td data-col="1" class="val">1,853 </td><td data-col="2" class="val">1,846 </td><td data-col="3" class="val">1,831 </td><td data-col="4" class="val">1,831 </td><td data-col="5" class="val">1,828 </td><td data-col="6" class="val">1,823 </td><td data-col="7" class="val">1,817 </td><td data-col="8" class="val">1,810 </td><td data-col="9" class="val">1,803 </td><td data-col="10" class="val">1,795 </td><td data-col="11" class="val">1,786 </td><td data-col="12" class="val">1,780 </td><td data-col="13" class="val">1,768 </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<script>
const LABELS = ['×™× ×•×³ 25','×¤×‘×¨×³ 25','××¨×¥ 25','××¤×¨×³ 25','×××™ 25','×™×•× ×™ 25','×™×•×œ×™ 25','××•×’×³ 25','×¡×¤×˜×³ 25','××•×§×³ 25','× ×•×‘×³ 25','×“×¦××³ 25','×™× ×•×³ 26','×¤×‘×¨×³ 26'];

const FUNDS = {
  '××©×§×”×©39905556':       { name:'××´×© ×§×´×”×© 39905556',      cat:'hishtalmut', data:[2406,2437,2416,2386,2401,2469,2548,2567,2595,2654,2685,2700,2700,2743] },
  '××©×§×”×©6730513':        { name:'××´×© ×§×´×”×© 6730513 â† ××™×˜×‘ 442504', cat:'hishtalmut', data:[772,792,770,747,754,802,846,860,869,905,919,921,941,981] },
  '××©×§×”×©40035706':       { name:'××´×© ×§×”×´×© 40035706',       cat:'hishtalmut', data:[281,285,283,279,281,289,298,300,304,310,314,316,316,321] },
  '××•×¨×§×”×©499293':        { name:'××•×¨ ×§×”×´×© 499293 â† ××™×˜×‘ 443195', cat:'hishtalmut', data:[320,339,348,350,362,391,418,435,448,473,493,508,529,561] },

  '6730511××©×’××œ':        { name:'××´×© ×’××œ 6730511 â† ××•×¨ 1428298', cat:'gemel', data:[402,413,402,391,395,421,444,452,457,476,484,490,495,517] },
  '××©×’××œ39774495':       { name:'××´×© ×’××œ 39774495 â† ××•×¨ 1375688', cat:'gemel', data:[262,266,263,260,262,269,277,277,283,289,292,293,294,300] },
  '6730512××©×’××œ':        { name:'××´×© ×’××œ 6730512 â† ××•×¨ 1375888', cat:'gemel', data:[218,220,220,220,222,224,230,231,233,237,240,242,242,245] },
  '6899425××©×’××œ':        { name:'××´×© ×’××œ 6899425 â† ××•×¨ 1375911', cat:'gemel', data:[176,180,176,170,172,183,193,196,198,206,209,209,213,223] },
  '×”×¤× ×™×§×¡×’××œ926-084678': { name:'×”×¤× ×™×§×¡ ×’××œ 926-084678',   cat:'gemel', data:[null,null,null,null,null,null,null,null,null,null,414,414,437,445] },
  '××©×’××œ×œ×”×©×§×¢×”2016-1738':{ name:'××´×© ×’××œ ×œ×”×©×§×¢×” â† ××™×˜×‘ 917-443197', cat:'gemel_invest', data:[286,371,368,364,366,376,389,391,396,405,410,411,415,424] },
  '××•×¨×’××œ×œ×”×©×§×¢×”':        { name:'××•×¨ ×’××œ ×œ×”×©×§×¢×” â† ××™×˜×‘ 912-443197', cat:'gemel_invest', data:[364,376,377,370,373,393,411,419,422,436,446,449,458,478] },
  '×”×¨××œ××’×•×•×Ÿ-×¤×•×œ×™×¡×ª×—×™×¡×›':{ name:'×”×¨××œ ××’×•×•×Ÿ - ×¤×•×œ×™×¡×ª ×—×™×¡×›×•×Ÿ', cat:'harel', data:[4469,4473,4440,4444,4536,4630,4704,4758,4810,4927,4949,5019,5119,5174] },
  '×”×¨××œ×× ×™×•×ª106863031':  { name:'×”×¨××œ ×× ×™×•×ª 106863031',    cat:'harel', data:[1680,1631,1572,1515,1620,1655,1703,1732,1799,1828,1775,1768,1766,1664] },
  '×”×¨××œ×›×œ×œ×™109062745':   { name:'×”×¨××œ ×›×œ×œ×™ 109062745',     cat:'harel', data:[null,null,null,null,252,258,262,265,268,274,275,279,285,288] },
  '××™×˜×‘×“×©× ×™×”×•×œ×§×¨× ×•×ª1693':{ name:'××™×˜×‘ ×“×© × ×™×”×•×œ ×§×¨× ×•×ª 169301968', cat:'meitav', data:[530,530,527,520,540,550,560,560,560,560,580,580,580,600] },
  '××™×˜×‘×“×©×˜×¨×™×™×“': { name:'××™×˜×‘ ×“×© ×˜×¨×™×™×“', cat:'meitav', data:[39,39,39,39,39,39,39,39,39,39,39,39,39,39] },
  '×—×•×‘×”×¨××œ':   { name:'×—×•×‘ ×”×¨××œ',       cat:'chov', data:[195,179,165,150,135,120,105,90,75,60,45,30,15,0] },
  '×—×•×‘××œ×˜×©×•×œ×¨':{ name:'×—×•×‘ ××œ×˜×©×•×œ×¨',    cat:'chov', data:[1667,1674,1681,1681,1696,1708,1718,1727,1735,1743,1750,1756,1765,1768] },
  '××¨×‘×™×˜×¨××–×•××œ×™×•': { name:'××¨×‘×™×˜×¨××–×³ ×•××œ×™×•', cat:'arbitrage', data:[719,822,824,772,808,846,902,900,895,895,886,901,0,0] },
  '×“×™×¨×”': { name:'×“×™×¨×”', cat:'dira', data:[1200,1200,1200,1200,1200,1200,1200,1200,1200,1200,1200,1200,1200,1200] },
  '××–×•××Ÿ×©×§×œ×™':   { name:'××–×•××Ÿ ×©×§×œ×™',   cat:'mezuman', data:[40,40,40,40,40,40,40,40,30,20,20,20,915,100] },
  '××–×•××Ÿ×“×•×œ×¨×™':  { name:'××–×•××Ÿ ×“×•×œ×¨×™ $', cat:'mezuman', data:[null,null,null,null,null,null,null,null,null,null,null,null,null,115] },
  '××™×˜×‘×©×§×œ×™×ª':   { name:'××™×˜×‘ ×§×¨×Ÿ ×›×¡×¤×™×ª', cat:'mezuman', data:[0,0,0,0,0,0,0,0,0,0,0,0,0,901] },
};

const CAT_COLORS = { mezuman:'#0891b2', chov:'#64748b', arbitrage:'#7c3aed', dira:'#78716c', hishtalmut:'#dc2626', gemel:'#b45309', gemel_invest:'#9f1239', harel:'#a16207', meitav:'#7c3aed', all:'#1a1a2e' };
const CAT_NAMES  = { mezuman:'××–×•××Ÿ', chov:'×—×•×‘', arbitrage:'××¨×‘×™×˜×¨××–×³ ×•××œ×™×•', dira:'×“×™×¨×”', hishtalmut:'×§×¨× ×•×ª ×”×©×ª×œ××•×ª', gemel:'×§×•×¤×•×ª ×’××œ', gemel_invest:'×’××œ ×œ×”×©×§×¢×”', harel:'×”×¨××œ', meitav:'××™×˜×‘', all:'×¡×”×´×› ×›×œ ×”×§×˜×’×•×¨×™×•×ª' };

// Category totals
const CAT_TOTALS = { mezuman:[], chov:[], arbitrage:[], dira:[], hishtalmut:[], gemel:[], gemel_invest:[], harel:[], meitav:[] };
LABELS.forEach((_, i) => {
  Object.entries(CAT_TOTALS).forEach(([cat, arr]) => {
    const vals = Object.values(FUNDS).filter(f => f.cat===cat).map(f => f.data[i]||0);
    arr.push(vals.reduce((a,b)=>a+b,0));
  });
});
const ALL_TOTALS = LABELS.map((_,i) => {
  let t = 0;
  Object.entries(CAT_TOTALS).forEach(([cat, arr]) => { t += cat === 'chov' ? -(arr[i]||0) : (arr[i]||0); });
  return t;
});

const WINDOW = 13;
let winStart = Math.max(0, LABELS.length - WINDOW);

function getWindow(data) {
  return { labels: LABELS.slice(winStart, winStart + WINDOW), data: data.slice(winStart, winStart + WINDOW) };
}

const ctx = document.getElementById('mainChart').getContext('2d');
let currentData = ALL_TOTALS;

let chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: getWindow(ALL_TOTALS).labels,
    datasets: [{
      label: '×¡×”×´×›',
      data: getWindow(ALL_TOTALS).data,
      borderColor: '#1a1a2e',
      backgroundColor: 'rgba(26,26,46,0.07)',
      borderWidth: 2.5,
      pointRadius: 5,
      pointHoverRadius: 7,
      pointBackgroundColor: '#1a1a2e',
      tension: 0.4,
      fill: true,
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: {
      legend: { display: false },
      tooltip: {
        rtl: true, textDirection: 'rtl',
        callbacks: { label: c => ` ${Math.round(c.parsed.y).toLocaleString()} ××œ×£` }
      }
    },
    scales: {
      x: { grid: { display: true, color:'#f0f0f0' }, ticks: { font: { family:'Heebo', size:11 } } },
      y: { grid: { color:'#f0f0f0' }, ticks: { callback: v=>v.toLocaleString(), font:{ family:'Heebo', size:11 } }, grace: '15%', beginAtZero: false }
    },
    animation: { duration: 300 }
  }
});

// Base Jan 2025 values for % calculations
const BASE = {
  mezuman: 0, // ×œ× × ××“×“
  hishtalmut: 3459, // excluding active fund
  gemel: 1058,
  gemel_invest: 731, // 650 + ×”×¤×§×“×” 81k (×¤×‘×¨' 2025)
  harel: 6149, // 6679 - 530 (××™×˜×‘)
  meitav: 569, // 530 ××™×˜×‘ ×§×¨× ×•×ª + 39 ×˜×¨×™×™×“
};
// Funds excluded from % (external/active) per category
const EXCLUDE_FROM_PCT = {
  mezuman: [],
  hishtalmut: ['××•×¨×§×”×©499293'],
  gemel: ['×”×¤× ×™×§×¡×’××œ926-084678'],
  gemel_invest: [],
  harel: ['×”×¨××œ×›×œ×œ×™109062745'],
  meitav: [],
};

function getCatTotal(cat, idx) {
  return Object.values(FUNDS).filter(f => f.cat===cat).reduce((s,f) => s+(f.data[idx]||0), 0);
}
function getCatMeasured(cat, idx) {
  const excl = EXCLUDE_FROM_PCT[cat] || [];
  return Object.entries(FUNDS).filter(([k,f]) => f.cat===cat && !excl.includes(k)).reduce((s,[,f]) => s+(f.data[idx]||0), 0);
}

function updateDynamicStats() {
  const endIdx = Math.min(winStart + WINDOW - 1, LABELS.length - 1);
  const cats = ['mezuman','hishtalmut','gemel','gemel_invest','harel','meitav','arbitrage','dira','chov'];
  const el = id => document.getElementById(id);
  const endLabel = LABELS[endIdx];

  const catTotals = {}, catMeasured = {};
  cats.forEach(cat => {
    catTotals[cat] = 0;
    catMeasured[cat] = 0;
    const excl = EXCLUDE_FROM_PCT[cat] || [];
    Object.entries(FUNDS).forEach(([k, f]) => {
      if (f.cat !== cat) return;
      const v = f.data[endIdx] || 0;
      catTotals[cat] += v;
      if (!excl.includes(k)) catMeasured[cat] += v;
    });
  });

  const grandTotal = cats.reduce((s,c) => c === 'chov' ? s - catTotals[c] : s + catTotals[c], 0);
  const noPctCats = ['mezuman','chov','arbitrage','dira'];
  const startIdx = winStart;
  const startLabel = LABELS[startIdx];
  const grandMeasured = cats.reduce((s,c) => noPctCats.includes(c) ? s : s + catMeasured[c], 0);
  const grandMeasuredStart = cats.reduce((s,c) => {
    if(noPctCats.includes(c)) return s;
    const excl = EXCLUDE_FROM_PCT[c]||[];
    let v = 0;
    Object.entries(FUNDS).forEach(([k,f]) => {
      if(f.cat===c && !excl.includes(k)) {
        // For arbitrage at startIdx: use actual value (should be non-zero)
        v += (f.data[startIdx]||0);
      }
    });
    return s + v;
  }, 0);
  const grandBase = grandMeasuredStart > 0 ? grandMeasuredStart : cats.reduce((s,c) => noPctCats.includes(c) ? s : s + (BASE[c]||0), 0);
  const grandBase0 = cats.reduce((s,c) => {
    const v = Object.entries(FUNDS).filter(([k,f])=>f.cat===c).reduce((a,[k,f])=>a+(f.data[startIdx]||0),0);
    return c === 'chov' ? s - v : s + v;
  }, 0);
  const grandPct = ((grandMeasured - grandBase) / grandBase * 100).toFixed(1);
  const grandDiff = grandTotal - grandBase0;

  if(el('hdr-total')) el('hdr-total').textContent = '' + Math.round(grandTotal).toLocaleString();
  // Middle stat: total change + breakdown
  if(el('hdr-change-val')) {
    const v = Math.round(grandDiff);
    el('hdr-change-val').textContent = (v<0?'-':'') + Math.abs(v).toLocaleString();
    el('hdr-change-val').style.color = v<0 ? '#ef4444' : '#4ade80';
  }
  const knownDeposits = 1682; // 81k ×’××œ + 414k ×¤× ×™×§×¡ + 286k ×”×¨××œ ×›×œ×œ×™ + 901k ×§×¨×Ÿ ×›×¡×¤×™×ª
  const returnsAmt = Math.round(grandDiff) - knownDeposits;
  if(el('hdr-returns-val')) {
    el('hdr-returns-val').textContent = (returnsAmt<0?'-':'') + Math.abs(returnsAmt).toLocaleString();
    el('hdr-returns-val').style.color = returnsAmt<0 ? '#ef4444' : 'white';
  }
  if(el('hdr-deposits-val')) el('hdr-deposits-val').textContent = knownDeposits.toLocaleString();
  // Right stat: measured return %
  if(el('hdr-ret-val')) {
    el('hdr-ret-val').textContent = (parseFloat(grandPct)<0?'-':'') + Math.abs(parseFloat(grandPct)).toFixed(1) + '%';
    el('hdr-ret-val').style.color = parseFloat(grandPct)<0 ? '#ef4444' : '#4ade80';
  }
  if(el('hdr-ret-range')) el('hdr-ret-range').textContent = startLabel + ' â€“ ' + endLabel;
  // Subtitle in red
  const headerSub = document.getElementById('hdr-subtitle');
  if(headerSub) { headerSub.textContent = '××¦×™×’: ' + endLabel; }

  if(el('card-val-all')) el('card-val-all').textContent = '' + Math.round(grandTotal).toLocaleString();
  if(el('card-chg-all')) el('card-chg-all').textContent = (grandPct>=0?'+':'') + grandPct + '% × ××“×“';

  cats.forEach(cat => {
    const noPct = ['mezuman','chov','arbitrage','dira'];
    const total = Math.round(Math.abs(catTotals[cat])).toLocaleString();
    if(el('card-val-'+cat)) el('card-val-'+cat).textContent = total;
    if(el('sec-val-'+cat)) {
      el('sec-val-'+cat).textContent = total;
      if(cat==='chov') el('sec-val-'+cat).style.color='#ef4444';
    }
    if (noPct.includes(cat)) {
      if(el('card-chg-'+cat)) { el('card-chg-'+cat).textContent=''; }
      if(el('sec-pct-'+cat)) { el('sec-pct-'+cat).textContent=''; el('sec-pct-'+cat).className='cat-pct'; }
      return;
    }
    if (BASE[cat] === 0) return;
    const pct = ((catMeasured[cat] - BASE[cat]) / BASE[cat] * 100).toFixed(1);
    const sign = pct >= 0 ? '+' : '';
    const arrow = pct >= 0 ? 'â–²' : 'â–¼';
    if(el('card-chg-'+cat)) el('card-chg-'+cat).textContent = arrow + ' ' + sign + pct + '%';
    if(el('sec-pct-'+cat)) {
      el('sec-pct-'+cat).textContent = sign + pct + '%';
      el('sec-pct-'+cat).className = 'cat-pct ' + (parseFloat(pct) >= 0 ? 'pos' : 'neg');
    }
  });
}
function updateNavButtons() {
  document.getElementById('btnPrev').disabled = winStart <= 0;
  document.getElementById('btnNext').disabled = winStart + WINDOW >= LABELS.length;
  const from = LABELS[winStart];
  const to = LABELS[Math.min(winStart + WINDOW - 1, LABELS.length - 1)];
  document.getElementById('winRange').textContent = to + ' â€“ ' + from;
  syncTableScroll();
  updateDynamicStats();
}

function syncTableScroll() {
  // Show only columns winStart to winStart+WINDOW-1
  const visStart = winStart;
  const visEnd = winStart + WINDOW - 1;
  document.querySelectorAll('[data-col]').forEach(el => {
    const col = parseInt(el.getAttribute('data-col'));
    el.style.display = (col >= visStart && col <= visEnd) ? '' : 'none';
  });
}

function slideWindow(dir) {
  winStart = Math.max(0, Math.min(winStart + dir, LABELS.length - WINDOW));
  const w = getWindow(currentData);
  chart.data.labels = w.labels;
  chart.data.datasets[0].data = w.data;
  chart.update();
  updateNavButtons();
}

let currentView = 'all';
let currentFund = null;

function updateChart(data, color, label) {
  currentData = data;
  const w = getWindow(data);
  chart.data.labels = w.labels;
  chart.data.datasets[0].data = w.data;
  chart.data.datasets[0].borderColor = color;
  chart.data.datasets[0].backgroundColor = color.replace(')', ',0.08)').replace('rgb','rgba');
  chart.data.datasets[0].pointBackgroundColor = color;
  chart.data.datasets[0].label = label;
  chart.update();
  document.getElementById('activeLabel').style.setProperty('--active-color', color);
  document.getElementById('activeLabelText').textContent = label;
}

function selectView(cat) {
  currentFund = null;
  currentView = cat;
  // Clear fund row highlights
  document.querySelectorAll('tr[data-fund]').forEach(r => r.classList.remove('fund-active'));
  // Update card highlights
  document.querySelectorAll('.card, .card-total').forEach(c => c.classList.remove('active'));
  document.getElementById('card-' + (cat==='all'?'all':cat))?.classList.add('active');
  // Update category header highlight
  document.querySelectorAll('.category-header').forEach(h => h.classList.remove('active'));
  if (cat !== 'all') document.getElementById('hdr-'+cat)?.classList.add('active');

  if (cat === 'all') {
    updateChart(ALL_TOTALS, '#1a1a2e', CAT_NAMES.all);
  } else {
    updateChart(CAT_TOTALS[cat], CAT_COLORS[cat], CAT_NAMES[cat]);
  }
}

function selectFund(fundKey, color) {
  const fund = FUNDS[fundKey];
  if (!fund) return;

  // If clicking same fund again - toggle delta row
  const existingDelta = document.querySelector(`.delta-row[data-delta="${fundKey}"]`);
  if (existingDelta) {
    existingDelta.classList.toggle('visible');
    return;
  }

  currentFund = fundKey;
  document.querySelectorAll('tr[data-fund]').forEach(r => r.classList.remove('fund-active'));
  const fundRow = document.querySelector(`tr[data-fund="${fundKey}"]`);
  fundRow?.classList.add('fund-active');

  // Remove any existing delta rows
  document.querySelectorAll('.delta-row').forEach(r => r.remove());

  // Build delta row
  if (fundRow) {
    const deltaRow = document.createElement('tr');
    deltaRow.className = 'delta-row visible';
    deltaRow.setAttribute('data-delta', fundKey);

    // Label cell
    const labelTd = document.createElement('td');
    labelTd.textContent = '×©×™× ×•×™ ×—×•×“×©×™';
    deltaRow.appendChild(labelTd);

    // Delta cells for each month
    fund.data.forEach((v, i) => {
      const td = document.createElement('td');
      td.setAttribute('data-col', i);
      // Check visibility
      if (i < winStart || i > winStart + WINDOW - 1) td.style.display = 'none';

      if (i === 0 || v === null) {
        td.textContent = 'â€”';
      } else {
        const prev = fund.data[i-1];
        if (prev === null || prev === 0) { td.textContent = 'â€”'; }
        else {
          const delta = v - prev;
          const pct = (delta / prev * 100).toFixed(1);
          const sign = delta >= 0 ? '+' : '';
          const cls = delta > 0 ? 'dpos' : (delta < 0 ? 'dneg' : 'dzer');
          td.innerHTML = `<span class="${cls} dval">${sign}${delta}</span><br><span class="${cls}">${sign}${pct}%</span>`;
        }
      }
      deltaRow.appendChild(td);
    });

    fundRow.insertAdjacentElement('afterend', deltaRow);
  }

  document.querySelectorAll('.card, .card-total').forEach(c => c.classList.remove('active'));
  updateChart(fund.data.map(v => v ?? NaN), color, fund.name);
}

function toggleCat(id) {
  const body = document.getElementById('body-' + id);
  const chev = document.getElementById('chev-' + id);
  body.classList.toggle('open');
  chev.classList.toggle('open');
}

// Init
document.getElementById('card-all').classList.add('active');
updateNavButtons();
</script>

<!-- CHAT BUBBLE -->
<div id="chat-bubble" onclick="toggleChat()" title="×©××œ ×©××œ×” ×¢×œ ×”×“×©×‘×•×¨×“">ğŸ’¬</div>

<div id="chat-panel">
  <div id="chat-header">
    <span>ğŸ¤– ×©××œ ×¢×œ ×”×“×©×‘×•×¨×“</span>
    <button onclick="toggleChat()" id="chat-close">âœ•</button>
  </div>
  <div id="chat-messages"></div>
  <div id="chat-input-row">
    <input id="chat-input" type="text" placeholder="×œ××©×œ: ×›××” ×”×™×” ×”×¨××œ ×‘×¡×¤×˜××‘×¨ 25?" 
           onkeydown="if(event.key==='Enter') sendChat()"/>
    <button onclick="sendChat()" id="chat-send">×©×œ×—</button>
  </div>
</div>

<style>
#chat-bubble {
  position: fixed;
  bottom: 28px;
  left: 28px;
  width: 56px;
  height: 56px;
  background: #1a1a2e;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
  z-index: 1000;
  transition: transform 0.2s;
}
#chat-bubble:hover { transform: scale(1.1); }

#chat-panel {
  position: fixed;
  bottom: 95px;
  left: 28px;
  width: 360px;
  max-height: 480px;
  background: #1a1a2e;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  display: none;
  flex-direction: column;
  z-index: 1000;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.1);
}
#chat-panel.open { display: flex; }

#chat-header {
  padding: 14px 16px;
  background: #0f0f23;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: white;
  font-family: 'Heebo', sans-serif;
  font-size: 14px;
  font-weight: 600;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}
#chat-close {
  background: none;
  border: none;
  color: #888;
  cursor: pointer;
  font-size: 16px;
  padding: 0;
}
#chat-close:hover { color: white; }

#chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 200px;
}

.chat-msg {
  padding: 10px 14px;
  border-radius: 12px;
  font-family: 'Heebo', sans-serif;
  font-size: 13px;
  line-height: 1.5;
  max-width: 85%;
  direction: rtl;
}
.chat-msg.user {
  background: #2d2d4e;
  color: white;
  align-self: flex-end;
  border-bottom-right-radius: 4px;
}
.chat-msg.assistant {
  background: #0f3460;
  color: #e2e8f0;
  align-self: flex-start;
  border-bottom-left-radius: 4px;
}
.chat-msg.thinking {
  background: #0f3460;
  color: #64748b;
  align-self: flex-start;
  font-style: italic;
}

#chat-input-row {
  padding: 12px;
  display: flex;
  gap: 8px;
  border-top: 1px solid rgba(255,255,255,0.1);
}
#chat-input {
  flex: 1;
  background: #0f0f23;
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 8px;
  padding: 8px 12px;
  color: white;
  font-family: 'Heebo', sans-serif;
  font-size: 13px;
  direction: rtl;
  outline: none;
}
#chat-input:focus { border-color: #4ade80; }
#chat-send {
  background: #4ade80;
  color: #0f0f23;
  border: none;
  border-radius: 8px;
  padding: 8px 14px;
  font-family: 'Heebo', sans-serif;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
}
#chat-send:hover { background: #22c55e; }
#chat-send:disabled { background: #374151; color: #6b7280; cursor: not-allowed; }
</style>

<script>
function toggleChat() {
  document.getElementById('chat-panel').classList.toggle('open');
  if(document.getElementById('chat-panel').classList.contains('open')) {
    // Show welcome message if empty
    const msgs = document.getElementById('chat-messages');
    if(msgs.children.length === 0) {
      addMsg('assistant', '×©×œ×•×! ×× ×™ ××›×™×¨ ××ª ×›×œ × ×ª×•× ×™ ×”×“×©×‘×•×¨×“. ×ª×©××œ ××•×ª×™ ×›×œ ×©××œ×” â€“ ×œ××©×œ: "×›××” ×”×™×” ×¡×š ×”×¨××œ ×‘×¡×¤×˜××‘×¨ 25?" ××• "××” ×”×ª×©×•××” ×©×œ ×§×¨× ×•×ª ×”×”×©×ª×œ××•×ª?"');
    }
    setTimeout(() => document.getElementById('chat-input').focus(), 100);
  }
}

function addMsg(role, text) {
  const msgs = document.getElementById('chat-messages');
  const div = document.createElement('div');
  div.className = 'chat-msg ' + role;
  div.textContent = text;
  msgs.appendChild(div);
  msgs.scrollTop = msgs.scrollHeight;
  return div;
}

function buildContext() {
  // Build a concise data summary for Claude
  const labels = LABELS;
  let ctx = '× ×ª×•× ×™ ×“×©×‘×•×¨×“ ×ª×™×§ ×”×©×§×¢×•×ª (××œ×¤×™ ×©"×—):\n\n';
  
  // Categories summary
  const cats = ['mezuman','hishtalmut','gemel','gemel_invest','harel','meitav','arbitrage','dira','chov'];
  const catNames = CAT_NAMES;
  
  Object.entries(FUNDS).forEach(([k, f]) => {
    ctx += f.name + ': ';
    ctx += labels.map((l,i) => l + '=' + (f.data[i] ?? '-')).join(', ');
    ctx += '\n';
  });
  
  ctx += '\n×¡×”"×› ×œ×¤×™ ×—×•×“×© (××—×¨×™ × ×™×›×•×™ ×—×•×‘):\n';
  ALL_TOTALS.forEach((t,i) => { ctx += labels[i] + '=' + Math.round(t) + ' '; });
  
  return ctx;
}

function sendChat() {
  const input = document.getElementById('chat-input');
  const q = input.value.trim();
  if(!q) return;
  input.value = '';
  addMsg('user', q);
  setTimeout(() => addMsg('assistant', answerQuestion(q)), 200);
  document.getElementById('chat-input').focus();
}

function answerQuestion(q) {
  const orig = q;
  q = q.toLowerCase();

  const monthMap = {
    '×™× ×•':0,'×™× ×•××¨':0,'×¤×‘×¨':1,'×¤×‘×¨×•××¨':1,'××¨×¥':2,'××¨×¡':2,
    '××¤×¨':3,'××¤×¨×™×œ':3,'×××™':4,'×™×•× ×™':5,'×™×•×œ×™':6,
    '××•×’':7,'××•×’×•×¡×˜':7,'×¡×¤×˜':8,'×¡×¤×˜××‘×¨':8,
    '××•×§':9,'××•×§×˜×•×‘×¨':9,'× ×•×‘':10,'× ×•×‘××‘×¨':10,'×“×¦×':11,'×“×¦××‘×¨':11,
  };

  function findMonthIndices(str) {
    const found = [];
    const tokens = str.split(/[\s,?\u2013\-]+/);
    for(let i=0;i<tokens.length;i++) {
      for(const [key,mIdx] of Object.entries(monthMap)) {
        if(tokens[i].includes(key)) {
          const ctx = tokens.slice(i,i+3).join(' ');
          const yr = ctx.includes('2026')||ctx.includes("'26")||ctx.includes(' 26') ? 26 : 25;
          found.push(Math.min(yr===26?mIdx+12:mIdx, LABELS.length-1));
          break;
        }
      }
    }
    return found;
  }

  const monthIndices = findMonthIndices(q);
  const monthIdx = monthIndices[0] ?? -1;

  function findFund(str) {
    const checks = [
      ['×”×¨××œ ××’×•×•×Ÿ','××’×•×•×Ÿ'],['×¤×•×œ×™×¡×ª ×—×™×¡×›×•×Ÿ','××’×•×•×Ÿ'],['928884078','××’×•×•×Ÿ'],
      ['×”×¨××œ ×× ×™×•×ª','×× ×™×•×ª'],['106863031','×× ×™×•×ª'],
      ['×”×¨××œ ×›×œ×œ×™','×›×œ×œ×™'],['109062745','×›×œ×œ×™'],
      ['××¨×‘×™×˜×¨××–','××¨×‘×™×˜×¨××–'],['×•××œ×™×•','××¨×‘×™×˜×¨××–'],
      ['××™×˜×‘ ×§×¨× ×•×ª','169301968'],['169301968','169301968'],
      ['×˜×¨×™×™×“','×˜×¨×™×™×“'],['×›×¡×¤×™×ª','×›×¡×¤×™×ª'],
      ['××•×¨ ×’××œ','××•×¨ ×’××œ'],['××•×¨ ×§×”','××•×¨ ×§×”'],
      ['×¤× ×™×§×¡','×¤× ×™×§×¡'],['×©×§×œ×™','×©×§×œ×™'],['×“×•×œ×¨×™','×“×•×œ×¨×™'],
    ];
    for(const [qk,nk] of checks) {
      if(str.includes(qk)) {
        for(const [k,f] of Object.entries(FUNDS))
          if(f.name.toLowerCase().includes(nk)) return [k,f];
      }
    }
    return null;
  }

  function catTot(cat,idx) {
    return Object.values(FUNDS).filter(f=>f.cat===cat).reduce((s,f)=>s+(f.data[idx]||0),0);
  }

  function fmtChange(v1,v2,l1,l2) {
    const d=v2-v1, p=v1>0?(d/v1*100).toFixed(1):'â€”';
    return l1+': '+Math.round(v1).toLocaleString()+
           '\n'+l2+': '+Math.round(v2).toLocaleString()+
           '\n×©×™× ×•×™: '+(d>=0?'+':'')+Math.round(d).toLocaleString()+
           ' ('+(d>=0?'+':'')+p+'%)';
  }

  // Determine year range
  let yearFrom=-1, yearTo=-1;
  if(q.includes('2025')&&!q.includes('2026')){yearFrom=0;yearTo=11;}
  else if(q.includes('2026')&&!q.includes('2025')){yearFrom=12;yearTo=LABELS.length-1;}
  else if(q.includes('2025')&&q.includes('2026')){yearFrom=0;yearTo=LABELS.length-1;}

  const isChange=['×¢×œ×”','×™×¨×“','×©×™× ×•×™','×¢×œ×™×™×”','×™×¨×™×“×”','×’×“×œ','×‘×›××”','×¦××—','×”×©×ª× ×”','×”×¤×¨×©','×ª×©×•××”','×‘×™×¦×•×¢×™×','×”×©×•×•×”','×”×©×•×•××”'].some(w=>q.includes(w));

  const fundResult = findFund(q);

  // --- Best performer ---
  if(q.includes('×”×›×™') && (q.includes('×¨×•×•×—×™')||q.includes('××•×¦×œ×—')||q.includes('×’×‘×•×”')||q.includes('×˜×•×‘'))) {
    const fi = yearFrom>=0?yearFrom:0;
    const ti = yearTo>=0?yearTo:LABELS.length-1;
    let best=null, bestPct=-Infinity;
    Object.entries(FUNDS).forEach(([k,f])=>{
      const v1=f.data[fi]||0, v2=f.data[ti]||0;
      if(v1>0){const p=(v2-v1)/v1*100; if(p>bestPct){bestPct=p;best=f;}}
    });
    if(best) return '×”×§×¨×Ÿ ×¢× ×”×ª×©×•××” ×”×’×‘×•×”×” ×‘×™×•×ª×¨: '+best.name+
                   '\n×ª×©×•××”: +'+(bestPct.toFixed(1))+'%'+
                   '\n('+LABELS[fi]+' â†’ '+LABELS[ti]+')';
  }

  // --- Worst performer ---
  if(q.includes('×”×›×™') && (q.includes('×’×¨×•×¢')||q.includes('× ××•×š')||q.includes('×™×¨×“')||q.includes('×—×œ×©'))) {
    const fi=yearFrom>=0?yearFrom:0, ti=yearTo>=0?yearTo:LABELS.length-1;
    let worst=null, worstPct=Infinity;
    Object.entries(FUNDS).forEach(([k,f])=>{
      const v1=f.data[fi]||0, v2=f.data[ti]||0;
      if(v1>0){const p=(v2-v1)/v1*100; if(p<worstPct){worstPct=p;worst=f;}}
    });
    if(worst) return '×”×§×¨×Ÿ ×¢× ×”×‘×™×¦×•×¢×™× ×”× ××•×›×™× ×‘×™×•×ª×¨: '+worst.name+
                    '\n×ª×©×•××”: '+(worstPct>=0?'+':'')+worstPct.toFixed(1)+'%';
  }

  // --- Compare two categories ---
  if(q.includes('×”×©×•×•×”')||q.includes('×”×©×•×•××”')||q.includes('×œ×¢×•××ª')||q.includes('××•×œ')) {
    const catKwMap = {
      'hishtalmut':['×”×©×ª×œ××•×ª'],'gemel_invest':['×’××œ ×œ×”×©×§×¢×”'],
      'gemel':['×§×•×¤×•×ª ×’××œ','×’××œ'],'harel':['×”×¨××œ'],'meitav':['××™×˜×‘'],
    };
    const found=[];
    for(const [cat,kws] of Object.entries(catKwMap))
      if(kws.some(kw=>q.includes(kw))) found.push(cat);
    if(found.length>=2) {
      const fi=yearFrom>=0?yearFrom:0, ti=yearTo>=0?yearTo:LABELS.length-1;
      return found.map(cat=>{
        const v1=catTot(cat,fi),v2=catTot(cat,ti),d=v2-v1;
        const p=v1>0?(d/v1*100).toFixed(1):'â€”';
        return CAT_NAMES[cat]+': '+(d>=0?'+':'')+Math.round(d).toLocaleString()+' ('+(d>=0?'+':'')+p+'%)';
      }).join('\n');
    }
  }

  // --- Specific fund ---
  if(fundResult) {
    const [k,f]=fundResult;
    if(monthIndices.length>=2) {
      return f.name+':\n'+fmtChange(f.data[monthIndices[0]]||0,f.data[monthIndices[1]]||0,LABELS[monthIndices[0]],LABELS[monthIndices[1]]);
    }
    if(yearFrom>=0||isChange) {
      const fi=yearFrom>=0?yearFrom:0, ti=yearTo>=0?yearTo:LABELS.length-1;
      return f.name+':\n'+fmtChange(f.data[fi]||0,f.data[ti]||0,LABELS[fi],LABELS[ti]);
    }
    if(monthIdx>=0) {
      const v=f.data[monthIdx];
      return f.name+' ×‘'+LABELS[monthIdx]+': '+(v!=null?v.toLocaleString()+' ××œ×¤×™ ×©"×—':'××™×Ÿ × ×ª×•×Ÿ');
    }
    const latest=f.data[LABELS.length-1]||0, first=f.data[0]||0;
    return f.name+':\n'+fmtChange(first,latest,LABELS[0],LABELS[LABELS.length-1]);
  }

  // --- Category ---
  const catKw={
    'hishtalmut':['×”×©×ª×œ××•×ª'],'gemel':['×§×•×¤×•×ª ×’××œ','×§×•×¤×ª ×’××œ','×’××œ'],
    'gemel_invest':['×’××œ ×œ×”×©×§×¢×”'],'harel':['×”×¨××œ'],'meitav':['××™×˜×‘'],
    'mezuman':['××–×•××Ÿ'],'arbitrage':['××¨×‘×™×˜×¨××–','×•××œ×™×•'],'dira':['×“×™×¨×”'],'chov':['×—×•×‘'],
  };
  for(const [cat,kws] of Object.entries(catKw)) {
    if(kws.some(kw=>q.includes(kw))) {
      if(q.includes('×’×‘×•×”')||q.includes('×©×™×')) {
        let max=0,maxL='';
        LABELS.forEach((l,i)=>{const v=catTot(cat,i);if(v>max){max=v;maxL=l;}});
        return CAT_NAMES[cat]+' â€“ ×¢×¨×š ×’×‘×•×” ×‘×™×•×ª×¨: '+Math.round(max).toLocaleString()+' ××œ×¤×™ ×©"×— ×‘'+maxL;
      }
      if(isChange||yearFrom>=0) {
        const fi=yearFrom>=0?yearFrom:(monthIndices[0]??0);
        const ti=yearTo>=0?yearTo:(monthIndices[1]??LABELS.length-1);
        return CAT_NAMES[cat]+':\n'+fmtChange(catTot(cat,fi),catTot(cat,ti),LABELS[fi],LABELS[ti]);
      }
      if(monthIdx>=0) return CAT_NAMES[cat]+' ×‘'+LABELS[monthIdx]+': '+Math.round(catTot(cat,monthIdx)).toLocaleString()+' ××œ×¤×™ ×©"×—';
      const l=catTot(cat,LABELS.length-1),e=catTot(cat,0);
      return CAT_NAMES[cat]+':\n'+fmtChange(e,l,LABELS[0],LABELS[LABELS.length-1]);
    }
  }

  // --- Total ---
  if(q.includes('×¡×š')||q.includes('×¡×”"×›')||q.includes('×ª×™×§')||q.includes('×›×•×œ×œ')||q.includes('× ×›×¡×™×')) {
    if(monthIdx>=0) return '×¡×”"×› ×ª×™×§ ×‘'+LABELS[monthIdx]+': '+Math.round(ALL_TOTALS[monthIdx]).toLocaleString()+' ××œ×¤×™ ×©"×—';
    if(isChange||yearFrom>=0) {
      const fi=yearFrom>=0?yearFrom:0, ti=yearTo>=0?yearTo:LABELS.length-1;
      return '×¡×”"×› ×ª×™×§:\n'+fmtChange(ALL_TOTALS[fi],ALL_TOTALS[ti],LABELS[fi],LABELS[ti]);
    }
    return '×¡×”"×› ×ª×™×§ ×›×¨×’×¢: '+Math.round(ALL_TOTALS[ALL_TOTALS.length-1]).toLocaleString()+' ××œ×¤×™ ×©"×—';
  }

  // --- All returns ---
  if(q.includes('×ª×©×•××”')||q.includes('×‘×™×¦×•×¢×™×')) {
    const fi=yearFrom>=0?yearFrom:0, ti=yearTo>=0?yearTo:LABELS.length-1;
    const lines=[];
    ['hishtalmut','gemel','gemel_invest','harel','meitav'].forEach(cat=>{
      const v1=catTot(cat,fi),v2=catTot(cat,ti),d=v2-v1;
      const p=v1>0?(d/v1*100).toFixed(1):'â€”';
      lines.push(CAT_NAMES[cat]+': '+(d>=0?'+':'')+p+'%');
    });
    return '×ª×©×•××” '+LABELS[fi]+' â€“ '+LABELS[ti]+':\n'+lines.join('\n');
  }

  return '×× ×™ ×™×›×•×œ ×œ×¢× ×•×ª ×¢×œ:\nâ€¢ ×›××” ×”×™×” ×”×¨××œ ××’×•×•×Ÿ ×‘×¡×¤×˜××‘×¨ 25?\nâ€¢ ×‘×›××” ×¢×œ×ª×” ×”×¨××œ ××’×•×•×Ÿ ×‘×©× ×ª 2025?\nâ€¢ ××™×–×• ×§×¨×Ÿ ×”×™×™×ª×” ×”×›×™ ×¨×•×•×—×™×ª ×‘-2025?\nâ€¢ ×”×©×•×•×” ×”×¨××œ ×œ×¢×•××ª ××™×˜×‘ ×‘×©× ×ª 2025\nâ€¢ ××” ×”×ª×©×•××” ×©×œ ×›×œ ×”×§×˜×’×•×¨×™×•×ª?\nâ€¢ ×¡×š ×”×›×œ ×”×ª×™×§ ×‘×“×¦××‘×¨ 25?';
}
</script>
</body>
</html>